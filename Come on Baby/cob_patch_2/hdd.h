#pragma once

#define HDD_ROOT 0x43 // C
#define HDD_CHECK_PATH "c:\\windows\\win386p.swp"
#define FAKE_HDDFILE_HANDLE 0x1337

// Static File used to store the HDD Serial on the ExPotato PCs
unsigned char win386p_file[84] = {
	0x09, 0x00, 0x00, 0x00, 0x38, 0x34, 0x30, 0x37, 0x36, 0x33, 0x36, 0x34, 0x35, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x73, 0x03, 0x5F, 0x02, 0x8B, 0x03, 0x6B, 0x02, 0x00, 0x00,
	0x4E, 0x15, 0xC8, 0x0C, 0x43, 0x01, 0x67, 0x03, 0x5F, 0x02, 0xAF, 0x03, 0x6B, 0x02, 0x67, 0x03,
	0x5F, 0x02, 0xA8, 0x03, 0x6B, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x30, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xDE, 0x15, 0xD0, 0x00, 0x5E, 0x09, 0x3E, 0x87,
	0xBF, 0x2B, 0x2E, 0x87
};


typedef BOOL (*pCloseHandle)(HANDLE hObject);

typedef BOOL (*pGetVolumeInformationA)(LPCSTR  lpRootPathName, LPSTR   lpVolumeNameBuffer, DWORD   nVolumeNameSize, LPDWORD lpVolumeSerialNumber, LPDWORD lpMaximumComponentLength, LPDWORD lpFileSystemFlags, LPSTR   lpFileSystemNameBuffer, DWORD   nFileSystemNameSize);


void hdd_patch();